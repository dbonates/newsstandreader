<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>ServerSide</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.1 (build 858)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">reader </a></h1>
				<a id="developerHome" href="../index.html">Basispress</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">How Server side might work</h1>
			</div>
		</header>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="MBProgressHUD Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="index.html">Index</a></li>
	<li><a href="hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="container">	
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>We highly recommend you to use our server side. We garantee that it would be free for first year from purchasing. If your application would generate too much traffic and we can't handle it, we will give U server side for free even for 1 app license. Otherwise you surelly can implement your own server side.</p>
					</div>
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Endpoints</h2>
						
	<div class="section-method">

	<p>Be sure you implemented these API responses on your server side</p>
	<a name="//api/name/animationType" title="animationType"></a>
	<h3 class="subsubtitle method-title">GET http://someyourhost.com/api/protocol.json?id=com.yourbundleidentifier.read</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Server should respond with JSON with all information about Subscriptions and Issues without download links. It might look like:</p>
		<pre>
{
  "subscriptions": [
      {"name":"Subscription Name",
       "product_identifier":"Subscription Product_identifier"}, 
      {same structure for else subscription options}
  ],
  "issues" : [
      {
        "name":"Issue name",
        "product_identifier":"Issue product identifier",
        "cover":"link to your cover image",
        "created_at":"Date Created",
        "data":[
            "link to your preview image",
            "more links"
          ],
        "contents":[
            {"pages":"12-13","text":"content for table of content for these pages"}, 
            {same structure for else content strings}
          ]
      }
  ] 
}

		</pre>
	</div>		
	</div>
							
	<div class="section-method">
	<a name="//api/name/animationType" title="animationType"></a>
	<h3 class="subsubtitle method-title">GET http://someyourhost.com/api/receipt.json?id=com.yourbundleidentifier.read&data=RECEIPTdata</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Server should verify a receipt data on Apple in-App-Purchase Server. Check out Apples <a href="http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html">In App Purhcase programming guide</a></p>
		<p>Response:</p>
		<pre>
{status:'ok',download_url:"link to download your issue"} if receipt is ok

{status:'failed'} if receipt broken or your receipt data failed Apples verification
		</pre>
	</div>		
	</div>

  <div class="section-method">
  <a name="//api/name/animationType" title="animationType"></a>
  <h3 class="subsubtitle method-title">GET http://someyourhost.com/api/receipt.json?id=com.yourbundleidentifier.read&data=RECEIPTdata&product_identifier=someProductIdentifier</h3>
  
  
  
  <div class="method-subsection brief-description">
    <p>If you check subscription receipt, you don't have current product_identifier from Apple, so you need to specify product_identifier to your server and check receipt data on Apple in-App-Purchase Server. Check out Apples <a href="http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html">In App Purhcase programming guide</a>.</p>
    <p>You also need to store shared secret token. Check out our <a href="http://www.youtube.com/watch?v=JZvNuYaChCw">video</a> to find out how to generate it.</p>
    <p>Response:</p>
    <pre>
{status:'ok',download_url:"link to download your issue"} if receipt is ok

{status:'failed'} if receipt broken or your receipt data failed Apples verification
    </pre>
  </div>    
  </div>

  <div class="section-method">
  <a name="//api/name/animationType" title="animationType"></a>
  <h3 class="subsubtitle method-title">POST http://someyourhost.com/push_tokens.json</h3>
  
  
  
  <div class="method-subsection brief-description">
    <p>For ability to send push notifications you need device tokens to be saved on your server:</p>
    <p>Application sends request in this format:</p>
    <pre>
      {"bundle_id":"com.yourbundleidentifier.read", "push_token":{"token":"YOUR DEVICE TOKEN BASE64 ENCODED"}}
    </pre>
    <p>So server should just respose with 200 OK to inform application that everything is ok and token is saved.</p>
  </div>    
  </div>

  <div class="section-method">
  <h3 class="subsubtitle method-title">Push Notifications</h3>
  
  
  <div class="method-subsection brief-description">
    <p>Server sends push notification about new issue when it creates and allow BACKGROUND downloading with special format of push notification. Check out <a href="http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9">Push Notification Guide</a> to implement that.</p>
    <p>You also need to have push notification certificate. Check out our <a href="http://www.youtube.com/watch?v=JZvNuYaChCw">video</a> to do that
  </div>    
  </div>


	</div>
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>